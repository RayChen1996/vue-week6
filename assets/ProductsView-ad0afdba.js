import{_ as p,e as m,r as g,o,c as n,a as t,F as b,f as k,n as f,t as i,b as v,w as y,d as $}from"./index-0c63a78b.js";import{S as w}from"./sweetalert2.all-742031dd.js";const{VITE_URL:c,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"raychen",BASE_URL:"/vue-week6/",MODE:"production",DEV:!1,PROD:!0},I={data(){return{products:[],loadingItem:""}},components:{RouterLink:m},methods:{getProducts(){this.$http.get(`${c}/v2/api/${h}/products/all`).then(s=>{this.products=s.data.products}).catch(s=>{alert(s.response.data.message)})},showAlert(s){w.fire({position:"top-end",icon:"success",title:`${s}`,showConfirmButton:!1,timer:1500})},addToCart(s,l=1){this.loadingItem=s;const r={product_id:s,qty:l};this.$http.post(`${c}/v2/api/${h}/cart`,{data:r}).then(a=>{this.loadingItem="",this.showAlert(a.data.message)}).catch(a=>{alert(a)})}},mounted(){this.getProducts()}},T={class:"table align-middle"},V=t("thead",null,[t("tr",null,[t("td",null,"商品"),t("td",null,"圖片"),t("td",null,"價格"),t("td")])],-1),x={style:{width:"200px"}},E={key:0,class:"h5"},C={key:1},L={class:"h6"},R={class:"h5"},P=["disabled","onClick"];function A(s,l,r,a,d,u){const _=g("RouterLink");return o(),n("table",T,[V,t("tbody",null,[(o(!0),n(b,null,k(d.products,e=>(o(),n("tr",{key:e.id},[t("td",x,[t("div",{style:f([{backgroundImage:`url(${e.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),t("td",null,i(e.title),1),t("td",null,[e.price===e.origin_price?(o(),n("div",E,i(e.price)+" 元 ",1)):(o(),n("div",C,[t("del",L,"原價 "+i(e.origin_price)+" 元",1),t("div",R,"現在只要 "+i(e.price)+" 元",1)]))]),t("td",null,[v(_,{to:`/product/${e.id}`,class:"btn btn-outline-secondary"},{default:y(()=>[$("查看產品")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-danger",disabled:e.id===d.loadingItem,onClick:B=>u.addToCart(e.id)},"加到購物車",8,P)])]))),128))])])}const U=p(I,[["render",A]]);export{U as default};
